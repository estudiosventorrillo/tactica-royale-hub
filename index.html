<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MGS: The Board Game | Companion (Fan Made)</title>
    
    <link rel="icon" type="image/png" href="https://cdn2.steamgriddb.com/icon/c652ffbba1b471f8c3da23f9b3c387ce.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        :root { --mgs-green: #00ff41; --mgs-bg: #050505; --mgs-border: #3d4c33; }
        
        /* CORRECCIÓN PC: Quitamos el overflow hidden del body para evitar bloqueos */
        body { 
            background-color: var(--mgs-bg); 
            color: var(--mgs-green); 
            font-family: 'Share Tech Mono', monospace; 
            text-transform: uppercase; 
            margin: 0; 
            height: 100dvh;
            display: flex;
            justify-content: center; /* Centra la app en PC */
        }
        
        body::before {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: -1;
            background-image: url('https://w0.peakpx.com/wallpaper/488/372/HD-wallpaper-mgs-fox-logo-big-boss-camo-fox-game-metal-gear-mgs-ps-snake.jpg');
            background-size: cover; background-position: center; opacity: 0.12;
            filter: grayscale(100%) sepia(100%) hue-rotate(90deg) saturate(500%);
            position: fixed; /* Mantiene el fondo fijo */
        }

        /* CORRECCIÓN RESPONSIVE: Limitamos el ancho en PC y permitimos scroll interno si es necesario */
        .screen { 
            display: none; 
            height: 100dvh; 
            width: 100%;
            max-width: 500px; /* Tamaño máximo tipo móvil para que no se deforme en PC */
            padding: 15px; 
            flex-direction: column; 
            position: relative; 
            z-index: 10; 
            overflow-y: auto; /* Permite scroll si la pantalla es muy pequeña */
            box-sizing: border-box;
        }
        .screen.active { display: flex; }
        
        .mgs-panel { border: 1px solid var(--mgs-green); background: rgba(0,0,0,0.85); box-shadow: 0 0 15px rgba(0,255,65,0.1); }
        
        /* Mantenemos tu proporción 70/30 */
        .char-img { 
            width: 100%; 
            height: 70%; 
            object-fit: cover; 
            filter: grayscale(100%) sepia(100%) hue-rotate(90deg) saturate(400%) contrast(120%);
            border-bottom: 1px solid var(--mgs-green);
            opacity: 0.8;
        }

        .token { width: 35px; height: 35px; border: 2px solid var(--mgs-green); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 10px; }
        .token.used { background: var(--mgs-green); color: black; box-shadow: 0 0 10px var(--mgs-green); }
        .token.focus { border-radius: 50%; }

        .hp-btn { border: 1px solid var(--mgs-green); background: rgba(0,255,65,0.1); width: 40px; text-align: center; font-weight: bold; font-size: 20px; transition: 0.2s; }
        .hp-btn:active { background: var(--mgs-green); color: black; }

        .tab-btn { border-bottom: 2px solid transparent; opacity: 0.5; transition: 0.3s; padding: 10px 5px; }
        .tab-btn.active { opacity: 1; border-bottom: 2px solid var(--mgs-green); background: rgba(0,255,65,0.05); }

        .hidden { display: none !important; }
        .item-row { border-bottom: 1px solid rgba(0,255,65,0.2); padding: 8px 0; display: flex; justify-content: space-between; align-items: center; }

        .credits { font-size: 9px; opacity: 0.6; text-align: center; margin-top: auto; padding-top: 10px; border-top: 1px solid rgba(0,255,65,0.1); }
        .social-links a { margin: 0 8px; font-size: 14px; transition: 0.3s; color: var(--mgs-green); }
        .social-links a:hover { opacity: 1; text-shadow: 0 0 8px var(--mgs-green); }
    </style>
</head>
<body>

    <div id="screen-selection" class="screen active">
        <h1 class="text-center text-2xl mt-4 mb-2 font-bold tracking-widest animate-pulse text-mgs-green drop-shadow-[0_0_5px_rgba(0,255,65,0.5)]">
            WELCOME TO<br>MGS: THE BOARD GAME<br>COMPANION
        </h1>
        <h2 class="text-center text-sm mb-4 tracking-widest border-b border-green-900 pb-2 opacity-80">SELECT OPERATIVE</h2>
        
        <div class="flex-grow grid grid-cols-2 gap-3 mb-4 min-h-[400px]">
            <button onclick="launchApp('SNAKE')" class="mgs-panel w-full h-full overflow-hidden flex flex-col hover:bg-green-900/20 transition-all">
                <img src="https://static.wikia.nocookie.net/metalgear/images/6/66/Solid_Snake_MGS2.png" class="char-img" alt="Snake">
                <div class="h-[30%] flex flex-col justify-center items-center w-full bg-black/50">
                    <span class="text-sm font-bold block leading-tight px-1">SOLID SNAKE</span>
                    <span class="text-[9px] opacity-70 tracking-wider">(INFILTRATOR)</span>
                </div>
            </button>
            <button onclick="launchApp('MERYL')" class="mgs-panel w-full h-full overflow-hidden flex flex-col hover:bg-green-900/20 transition-all">
                <img src="https://static.wikia.nocookie.net/movie-spoof-films/images/4/4c/TSMerylPP.png" class="char-img" alt="Meryl">
                <div class="h-[30%] flex flex-col justify-center items-center w-full bg-black/50">
                    <span class="text-sm font-bold block leading-tight px-1">MERYL SILVERBURGH</span>
                    <span class="text-[9px] opacity-70 tracking-wider">(COMBAT)</span>
                </div>
            </button>
            <button onclick="launchApp('OTACON')" class="mgs-panel w-full h-full overflow-hidden flex flex-col hover:bg-green-900/20 transition-all">
                <img src="https://static.wikia.nocookie.net/metalgear/images/3/3b/MGS2OtaconPP.png/revision/latest?cb=20160723004601&path-prefix=es" class="char-img" alt="Otacon">
                <div class="h-[30%] flex flex-col justify-center items-center w-full bg-black/50">
                    <span class="text-sm font-bold block leading-tight px-1">OTACON</span>
                    <span class="text-[9px] opacity-70 tracking-wider">(SUPPORT)</span>
                </div>
            </button>
            <button onclick="launchApp('FOX')" class="mgs-panel w-full h-full overflow-hidden flex flex-col hover:bg-green-900/20 transition-all">
                <img src="https://oyster.ignimgs.com/mediawiki/apis.ign.com/the-phantom-pain/1/12/IMG_0036.PNG?width=640" class="char-img" alt="Fox">
                <div class="h-[30%] flex flex-col justify-center items-center w-full bg-black/50">
                    <span class="text-sm font-bold block leading-tight px-1">GRAY FOX</span>
                    <span class="text-[9px] opacity-70 tracking-wider">(NINJA)</span>
                </div>
            </button>
        </div>

        <footer class="credits">
            <p class="mb-2">Designed and Developed by Juan Luis Valverde</p>
            <div class="social-links">
                <a href="https://www.linkedin.com/in/juanluis-valverde/" target="_blank"><i class="bi bi-linkedin"></i></a>
                <a href="https://www.behance.net/estudiosventorrillo" target="_blank"><i class="bi bi-behance"></i></a>
                <a href="https://www.instagram.com/estudiosventorrillo/?hl=es" target="_blank"><i class="bi bi-instagram"></i></a>
            </div>
        </footer>
    </div>

    <div id="screen-main" class="screen">
        <header class="flex justify-between items-start mb-2">
            <div>
                <h2 id="ui-name" class="text-lg font-bold leading-none">OPERATIVE</h2>
            </div>
            <button onclick="resetApp()" class="border border-red-500 text-red-500 text-[9px] px-2 py-1 bg-red-900/10 uppercase">
                <i class="bi bi-x-circle"></i> Abort
            </button>
        </header>

        <div class="mgs-panel p-3 mb-3">
            <div class="flex justify-between text-[10px] mb-2 uppercase">
                <span>Health Status</span>
                <span id="ui-hp-percent">100%</span>
            </div>
            <div class="flex gap-2 items-center">
                <button onclick="updateHP(-10)" class="hp-btn">-</button>
                <div class="flex-grow h-4 border border-green-500 relative">
                    <div id="ui-hp-bar" class="h-full bg-green-500 transition-all duration-300" style="width: 100%;"></div>
                </div>
                <button onclick="updateHP(10)" class="hp-btn">+</button>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-2 mb-3">
            <div class="mgs-panel p-2">
                <p class="text-[9px] mb-2">ACTIONS</p>
                <div class="flex justify-between" id="action-box">
                    <div class="token" onclick="this.classList.toggle('used')">1</div>
                    <div class="token" onclick="this.classList.toggle('used')">2</div>
                    <div class="token" onclick="this.classList.toggle('used')">3</div>
                    <div class="token" onclick="this.classList.toggle('used')">4</div>
                </div>
            </div>
            <div class="mgs-panel p-2">
                <p class="text-[9px] mb-2">FOCUS</p>
                <div class="flex justify-between">
                    <div class="token focus" onclick="this.classList.toggle('used')">F</div>
                    <div class="token focus" onclick="this.classList.toggle('used')">F</div>
                    <div class="token focus" onclick="this.classList.toggle('used')">F</div>
                    <div class="token focus" onclick="this.classList.toggle('used')">F</div>
                </div>
            </div>
        </div>

        <nav class="flex text-[10px] mb-1">
            <button id="btn-inv" onclick="switchTab('inv')" class="flex-1 tab-btn active">INVENTORY</button>
            <button id="btn-skills" onclick="switchTab('skills')" class="flex-1 tab-btn">SKILLS</button>
            <button id="btn-log" onclick="switchTab('log')" class="flex-1 tab-btn">LOG</button>
        </nav>

        <main class="mgs-panel flex-grow p-3 overflow-y-auto mb-2">
            <div id="tab-inv" class="tab-content">
                <div id="items-container" class="grid grid-cols-1 gap-2 mb-4"></div>
                <div class="flex gap-2 mt-4 p-2 mgs-panel bg-green-900/10">
                    <select id="item-selector" class="flex-grow bg-black border border-green-900 text-[10px] text-green-500 p-2 focus:outline-none">
                        <option value="" disabled selected>-- SELECT EQUIPMENT --</option>
                        <optgroup label="CONSUMABLES">
                            <option value="RATIONS">RATIONS (+30% HP)</option>
                            <option value="CARDBOARD BOX">CARDBOARD BOX</option>
                            <option value="CHAFF GRENADE">CHAFF GRENADE</option>
                            <option value="STUN GRENADE">STUN GRENADE</option>
                        </optgroup>
                        <optgroup label="WEAPONS & GEAR">
                            <option value="SOCOM">SOCOM (HANDGUN)</option>
                            <option value="FAMAS">FAMAS (RIFLE)</option>
                            <option value="HF BLADE">HF BLADE</option>
                            <option value="STEALTH CAMO">STEALTH CAMO</option>
                            <option value="MINE DETECTOR">MINE DETECTOR</option>
                            <option value="NIGHT VISION GOGGLES">NVG GOGGLES</option>
                        </optgroup>
                    </select>
                    <button onclick="addItemFromList()" class="border border-green-500 px-3 bg-green-900/30"><i class="bi bi-plus"></i></button>
                </div>
            </div>

            <div id="tab-skills" class="tab-content hidden">
                <div id="skills-render" class="space-y-4"></div>
            </div>

            <div id="tab-log" class="tab-content hidden text-[10px] space-y-1">
                <div id="log-render"></div>
            </div>
        </main>

        <button onclick="fullResetTurn()" class="mgs-panel w-full py-4 text-sm font-bold bg-green-900/20 active:bg-green-500 active:text-black mb-4">
            NEXT TURN / REFRESH
        </button>

        <footer class="credits">
            <p class="mb-2">Designed and Developed by Juan Luis Valverde</p>
            <div class="social-links">
                <a href="https://www.linkedin.com/in/juanluis-valverde/" target="_blank"><i class="bi bi-linkedin"></i></a>
                <a href="https://www.behance.net/estudiosventorrillo" target="_blank"><i class="bi bi-behance"></i></a>
                <a href="https://www.instagram.com/estudiosventorrillo/?hl=es" target="_blank"><i class="bi bi-instagram"></i></a>
            </div>
        </footer>
    </div>

    <script>
        const database = {
            'SNAKE': { name: 'SOLID SNAKE', skills: [{n:'Expert Sneak', d:'Repeat 1 die on stealth rolls.'}, {n:'CQC', d:'+1 to Melee attacks.'}], items: ['SOCOM', 'BINOCULARS'] },
            'MERYL': { name: 'MERYL SILVERBURGH', skills: [{n:'Agile', d:'Move through enemy spaces if no LOS.'}, {n:'Marksman', d:'Range +1 with handguns.'}], items: ['DESERT EAGLE', 'RATIONS'] },
            'OTACON': { name: 'OTACON', skills: [{n:'Hacker', d:'No Focus cost for terminal interaction.'}, {n:'Supply Box', d:'Start with 1 extra random item.'}], items: ['RATIONS', 'ADV STEALTH CAMO'] },
            'FOX': { name: 'GRAY FOX', skills: [{n:'Exoskeleton', d:'Movement +1.'}, {n:'HF Blade', d:'Ignore enemy armor in melee.'}], items: ['HF BLADE', 'STEALTH CAMO'] }
        };

        let activeChar = null; let hp = 100; let inv = [];

        function launchApp(id) {
            activeChar = database[id];
            hp = 100;
            inv = [...activeChar.items];
            document.getElementById('ui-name').innerText = activeChar.name;
            renderSkills(); renderInventory(); updateHP(0);
            addToLog(`Link established with ${activeChar.name}`);
            document.getElementById('screen-selection').classList.remove('active');
            document.getElementById('screen-main').classList.add('active');
            window.scrollTo(0,0); // Asegura que la nueva pantalla empiece arriba
        }

        function resetApp() { if(confirm("ABORT MISSION? SYSTEM WILL REBOOT.")) location.reload(); }

        function updateHP(val) {
            hp = Math.max(0, Math.min(100, hp + val));
            document.getElementById('ui-hp-bar').style.width = hp + "%";
            document.getElementById('ui-hp-percent').innerText = hp + "%";
            if(val !== 0) addToLog(`HP change: ${val}% (Current: ${hp}%)`);
        }

        function renderSkills() {
            const container = document.getElementById('skills-render');
            container.innerHTML = activeChar.skills.map(s => `
                <div class="border-l-2 border-green-500 pl-3">
                    <div class="text-xs font-bold">${s.n}</div>
                    <div class="text-[10px] opacity-70">${s.d}</div>
                </div>
            `).join('');
        }

        function renderInventory() {
            const container = document.getElementById('items-container');
            if (!container) return;
            if (inv.length === 0) { container.innerHTML = '<div class="text-[9px] text-center opacity-40">NO EQUIPMENT AVAILABLE</div>'; return; }
            container.innerHTML = inv.map((item, i) => `
                <div class="item-row px-2">
                    <span class="text-xs">${item}</span>
                    <div class="flex gap-2">
                        <button onclick="useItem(${i})" class="text-[9px] border border-green-500 px-2 py-1">USE</button>
                        <button onclick="removeItem(${i})" class="text-red-500/60"><i class="bi bi-trash"></i></button>
                    </div>
                </div>
            `).join('');
        }

        function addItemFromList() {
            const selector = document.getElementById('item-selector');
            const selectedItem = selector.value;
            if (selectedItem) { inv.push(selectedItem); addToLog(`Item added: ${selectedItem}`); renderInventory(); selector.selectedIndex = 0; }
        }

        function removeItem(index) { inv.splice(index, 1); renderInventory(); }

        function useItem(index) {
            const item = inv[index];
            const consumables = ['RATIONS', 'CARDBOARD BOX', 'CHAFF GRENADE', 'STUN GRENADE'];
            addToLog(`Used item: ${item}`);
            if(item === 'RATIONS') updateHP(30);
            if(consumables.includes(item)) inv.splice(index, 1);
            renderInventory();
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.remove('hidden');
            document.getElementById('btn-' + tabId).classList.add('active');
        }

        function addToLog(msg) {
            const container = document.getElementById('log-render');
            const entry = document.createElement('div'); entry.innerText = `> ${msg}`; container.prepend(entry);
        }

        function fullResetTurn() {
            document.querySelectorAll('.token').forEach(t => t.classList.remove('used'));
            addToLog("New turn started. Tokens reset.");
        }
    </script>
</body>
</html>